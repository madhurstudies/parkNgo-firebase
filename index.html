
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Park N Go ‚Äì Smart Parking Platform</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
--bg:#070814;
--panel:#0f172a;
--gold:#f4c463;
--blue:#3b82f6;
--red:#ef4444;
--green:#22c55e;
--muted:#94a3b8;
}

*{box-sizing:border-box;font-family:Inter,system-ui}
body{
margin:0;
background:
radial-gradient(circle at 20% 30%, rgba(244,196,99,.15), transparent 40%),
radial-gradient(circle at 80% 70%, rgba(59,130,246,.15), transparent 45%),
var(--bg);
color:white;
min-height:100vh;
}

/* ================= NAV ================= */
.top-nav{
position:sticky;
top:0;
z-index:200;
display:flex;
justify-content:space-between;
align-items:center;
padding:18px 50px;
background:rgba(7,8,20,.9);
backdrop-filter:blur(12px);
border-bottom:1px solid rgba(255,255,255,.08);
}

.brand{
font-weight:900;
font-size:1.2rem;
color:var(--gold);
letter-spacing:1px;
}

.nav-right{
display:flex;
gap:26px;
font-size:.85rem;
color:#cbd5f5;
}

.nav-item{
position:relative;
cursor:pointer;
}

.nav-item:hover{color:var(--gold)}

.nav-dropdown{
display:none;
position:absolute;
top:36px;
right:0;
width:340px;
background:rgba(15,23,42,.96);
padding:18px;
border-radius:16px;
box-shadow:0 30px 80px rgba(0,0,0,.7);
}

.nav-item:hover .nav-dropdown{display:block}

.nav-dropdown h4{
color:var(--gold);
margin-bottom:10px;
font-size:.9rem;
}

.nav-dropdown p,
.nav-dropdown li{
font-size:.75rem;
color:var(--muted);
margin-bottom:6px;
line-height:1.4;
}

.price-box{
background:rgba(255,255,255,.05);
border:1px solid rgba(255,255,255,.08);
border-radius:12px;
padding:10px;
margin-bottom:8px;
}

/* ================= AUTH ================= */
#auth{
min-height:calc(100vh - 80px);
display:flex;
flex-direction: column;
align-items:center;
justify-content:center;
}

.auth{
background:rgba(15,23,42,.8);
padding:45px;
width:420px;
border-radius:26px;
box-shadow:0 40px 90px rgba(0,0,0,.7);
}

.auth h2{
text-align:center;
color:var(--gold);
margin-bottom:8px;
}

.auth p{
text-align:center;
font-size:.8rem;
color:var(--muted);
margin-bottom:20px;
}

.auth input,
.auth select{
width:100%;
padding:14px;
margin-bottom:14px;
background:#020617;
border:1px solid rgba(255,255,255,.15);
border-radius:12px;
color:white;
}

button{
width:100%;
padding:14px;
border:none;
border-radius:14px;
font-weight:900;
cursor:pointer;
background:linear-gradient(135deg,#f4c463,#eab308);
}

/* ================= APP ================= */
#app{display:none}

.dashboard{
display:grid;
grid-template-columns:240px 1fr;
min-height:100vh;
}

.sidebar{
background:#020617;
padding:25px;
border-right:1px solid rgba(255,255,255,.1);
}

.stat{margin-bottom:18px}
.stat small{color:var(--muted)}
.stat h2{color:var(--gold)}

.main{padding:30px}

.grid{
display:grid;
grid-template-columns:repeat(10,1fr);
gap:8px;
background:rgba(0,0,0,.4);
padding:20px;
border-radius:20px;
}

.spot{
height:46px;
border-radius:4px;
display:flex;
align-items:center;
justify-content:center;
font-size:.7rem;
cursor:pointer;
border: 2px solid transparent;
}

.free{background:#020617;border:1px solid #1e293b}
.locked{background:var(--blue)}
.booked{background:var(--red)}
.parked{background:var(--green)}
.cab{background:var(--blue)}

@keyframes flash {
  50% { border-color: var(--gold); }
}

.expiring {
  animation: flash 1s infinite;
}

/* ================= MODALS ================= */
.overlay{
position:fixed;
inset:0;
background:rgba(0,0,0,.85);
display:none;
align-items:center;
justify-content:center;
}

.card{
position: relative;
background:white;
color:black;
padding:30px;
border-radius:20px;
width:320px;
text-align:center;
}

.back-button {
    position: absolute;
    top: 20px;
    left: 20px;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background: #eee;
    color: black;
    font-size: 1.2rem;
    line-height: 1;
    padding: 0;
    border: none;
    cursor: pointer;
}

.hour-selector {
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 20px 0;
}

.hour-selector button {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: #eee;
  color: black;
  font-size: 1.5rem;
  line-height: 1;
  padding: 0;
  border: none;
  cursor: pointer;
}

.hour-selector span {
  font-size: 2rem;
  font-weight: bold;
  padding: 0 20px;
  min-width: 80px;
}

</style>
</head>

<body>

<!-- NAV -->
<nav class="top-nav">
  <div class="brand">üöó PARK N GO</div>

  <div class="nav-right">
    <div class="nav-item">About
      <div class="nav-dropdown">
        <h4>About Park N Go</h4>
        <p>Smart parking platform reducing congestion, uncertainty and revenue loss.</p>
        <p>Built for owners and Ola/Uber drivers.</p>
      </div>
    </div>

    <div class="nav-item">Why Us
      <div class="nav-dropdown">
        <h4>Why Choose Us</h4>
        <ul>
          <li>Real-time slot availability</li>
          <li>Instant spot locking</li>
          <li>Driver & vehicle tracking</li>
          <li>Overstay monitoring</li>
          <li>Reserved vs walk-in control</li>
          <li>Zonal parking layout</li>
          <li>Clear color-coded bays</li>
          <li>Time-based billing</li>
          <li>Live revenue stats</li>
          <li>Enterprise-ready UI</li>
        </ul>
      </div>
    </div>

    <div class="nav-item">Pricing
      <div class="nav-dropdown">
        <div class="price-box"><b>BASIC ‚Äì ‚Çπ999</b><br>50 spots</div>
        <div class="price-box"><b>PRO ‚Äì ‚Çπ2,999</b><br>150 spots</div>
        <div class="price-box"><b>ENTERPRISE ‚Äì ‚Çπ4,999</b><br>300+ spots</div>
      </div>
    </div>
  </div>
</nav>

<!-- AUTH -->
<section id="auth">
<div class="auth">
<h2>Enter Platform</h2>
<p>Unified parking system for owners & drivers</p>
<input id="email" placeholder="Email">
<select id="plan">
<option value="50">BASIC ‚Äì 50 slots</option>
<option value="150">PRO ‚Äì 150 slots</option>
<option value="300">ENTERPRISE ‚Äì 300+ slots</option>
</select>
<button id="enterBtn">ENTER</button>
</div>
<button id="driverLoginBtn" style="margin-top: 20px; width: 420px; background: var(--green);">Login as Ola/Uber Driver</button>
</section>

<!-- APP -->
<section id="app">
<div class="dashboard">
<div class="sidebar">
<div class="stat"><small>Total Slots</small><h2 id="cap">0</h2></div>
<div class="stat"><small>Booked</small><h2 id="booked">0</h2></div>
<div class="stat"><small>Parked</small><h2 id="parked">0</h2></div>
<div class="stat"><small>Cabs</small><h2 id="cabs">0</h2></div>
<div class="stat"><small>Revenue</small><h2 id="rev">‚Çπ0</h2></div>
<button onclick="location.reload()">Logout</button>
</div>

<div class="main">
<h2>Live Parking Grid</h2>
<div class="grid" id="grid"></div>
</div>
</div>
</section>

<!-- BOOK -->
<div class="overlay" id="bookModal">
<div class="card">
<button id="backButton" class="back-button">‚Üê</button>
<h3>Book Spot</h3>
<p style="font-size: 0.8rem; color: #555;">Approx. hours you will park</p>
<div class="hour-selector">
    <button id="hourMinus">-</button>
    <span id="hoursDisplay">2</span>
    <button id="hourPlus">+</button>
</div>
<input id="hours" type="hidden" value="2">
<button id="goPay">Proceed to Pay</button>
<button id="onsitePark" style="margin-top: 10px; background: var(--green);">Park Onsite</button>
<button id="cabPark" style="margin-top: 10px; background: var(--blue);">Cab</button>
</div>
</div>


<!-- PAY -->
<div class="overlay" id="payModal">
<div class="card">
<img src="https://upload.wikimedia.org/wikipedia/commons/8/89/Razorpay_logo.svg" width="120">
<h3>Pay ‚Çπ<span id="amt">0</span></h3>
<button id="payNow">PAY</button>
</div>
</div>

<!-- PARKED INFO -->
<div class="overlay" id="parkedInfoModal">
  <div class="card">
    <h3>Parking Info</h3>
    <p id="parkedTime"></p>
    <button id="parkOutButton" style="background: var(--red);">Park Out</button>
    <button id="closeParkedInfo" style="margin-top: 10px;">Close</button>
  </div>
</div>

<script>
const state={user:null,spots:[],selected:null,revenue:0};

const hoursDisplay = document.getElementById('hoursDisplay');
const hoursInput = document.getElementById('hours');
const hourPlus = document.getElementById('hourPlus');
const hourMinus = document.getElementById('hourMinus');
const closeParkedInfo = document.getElementById('closeParkedInfo');
const backButton = document.getElementById('backButton');
const parkOutButton = document.getElementById('parkOutButton');
const driverLoginBtn = document.getElementById('driverLoginBtn');
const cabPark = document.getElementById('cabPark');
const cabs = document.getElementById('cabs');


enterBtn.onclick=()=> {
  state.user={capacity:+plan.value};
  initSpots();
  auth.style.display="none";
  app.style.display="block";
  render();
};

driverLoginBtn.onclick = () => {
    window.location.href = 'driver_login.html';
}

hourPlus.onclick = () => {
    let currentHours = parseInt(hoursInput.value);
    currentHours++;
    hoursInput.value = currentHours;
    hoursDisplay.innerText = currentHours;
};

hourMinus.onclick = () => {
    let currentHours = parseInt(hoursInput.value);
    if (currentHours > 1) {
        currentHours--;
        hoursInput.value = currentHours;
        hoursDisplay.innerText = currentHours;
    }
};

backButton.onclick = () => {
    if (state.selected !== null) {
        state.spots[state.selected].status = "free";
        state.selected = null;
    }
    bookModal.style.display = "none";
    render();
};

function initSpots(){
state.spots=Array.from({length:state.user.capacity},(_,i)=>({id:i+1,status:"free"}));
}

function render(){
cap.innerText=state.spots.length;
booked.innerText=state.spots.filter(s=>s.status==="booked").length;
parked.innerText=state.spots.filter(s=>s.status==="parked").length;
cabs.innerText = state.spots.filter(s => s.status === "cab").length;
rev.innerText="‚Çπ"+state.revenue;
grid.innerHTML="";
state.spots.forEach((s,i)=>{
    const d=document.createElement("div");
    let classes = "spot " + s.status;
    if (s.expiring) {
        classes += " expiring";
    }
    d.className = classes;
    d.innerText=s.id;
    d.onclick=()=>selectSpot(i);
    grid.appendChild(d);
});
}

function selectSpot(i){
    const spot = state.spots[i];
    if (spot.status === 'parked' || spot.status === 'cab') {
        state.selected = i;
        const parkedAt = new Date(spot.parkedAt);
        const durationInSeconds = (new Date() - parkedAt) / 1000;
        const hours = Math.floor(durationInSeconds / 8);
        const minutes = Math.floor(((durationInSeconds % 8) / 8) * 60);
        parkedTime.innerText = `Parked for ${hours}h and ${minutes}m.`;
        parkedInfoModal.style.display = "flex";
        return;
    }
    if (spot.status !== "free") return;
    state.spots[i].status = "locked";
    state.selected = i;
    bookModal.style.display = "flex";
    render();
}

goPay.onclick=()=> {
amt.innerText=hours.value*50;
bookModal.style.display="none";
payModal.style.display="flex";
};

payNow.onclick=()=> {
const spot = state.spots[state.selected];
spot.status= "booked";
spot.approxHours = parseInt(hours.value);
state.revenue+=hours.value*50;
payModal.style.display="none";
render();
};

onsitePark.onclick=()=> {
    const spot = state.spots[state.selected];
    spot.status = "parked";
    spot.parkedAt = new Date().toISOString();
    spot.billedHours = 0;
    spot.approxHours = parseInt(hours.value);
    bookModal.style.display = "none";
    render();
};

cabPark.onclick = () => {
    const spot = state.spots[state.selected];
    spot.status = "cab";
    spot.parkedAt = new Date().toISOString();
    spot.billedHours = 0;
    spot.approxHours = parseInt(hours.value);
    bookModal.style.display = "none";
    render();
}

closeParkedInfo.onclick = () => {
  parkedInfoModal.style.display = "none";
};

parkOutButton.onclick = () => {
    const spot = state.spots[state.selected];
    spot.status = "free";
    spot.parkedAt = null;
    spot.billedHours = 0;
    spot.approxHours = null;
    spot.expiring = false;
    parkedInfoModal.style.display = "none";
    state.selected = null;
    render();
};

function updateTimers() {
    let revenueToAdd = 0;
    const now = new Date();
    state.spots.forEach(spot => {
        if ((spot.status === 'parked' || spot.status === 'cab') && spot.parkedAt) {
            const parkedDate = new Date(spot.parkedAt);
            const durationInSeconds = (now - parkedDate) / 1000;
            const hoursParked = Math.floor(durationInSeconds / 8);

            if (hoursParked > spot.billedHours) {
                const hoursToBill = hoursParked - spot.billedHours;
                revenueToAdd += hoursToBill * (spot.status === 'cab' ? 20 : 50);
                spot.billedHours = hoursParked;
            }

            if (spot.approxHours && hoursParked >= spot.approxHours) {
                 spot.expiring = true;
            } else {
                 spot.expiring = false;
            }

        }
    });

    if (revenueToAdd > 0) {
        state.revenue += revenueToAdd;
    }
    render();
}

setInterval(updateTimers, 1000);

</script>

</body>
</html>
